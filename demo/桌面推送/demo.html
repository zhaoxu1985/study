<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>桌面推送demo</title>
</head>

<body>
    <button>Notify me!</button>
    <script> 
    if (window.Notification) {
 
        var ua = navigator.userAgent.toLowerCase();
        if (ua.indexOf('safari') != -1) {
            if (ua.indexOf('chrome') > -1) {
                // Chrome
                Notification.requestPermission().then(function (permission) {
                    if (permission == "granted") {
                        console.log('统一');
                        // var msg  = new Notification(`<div style="background-color:red">你好</div>`)
                        var notification = new Notification('你好',{
                            
                            badge:'red',
                            dir:"ltr",
                            body: '<div> nihao </div>',
                            icon: 'https://www.easyicon.net/api/resizeApi.php?id=1211328&size=32'
                        });

                        notification.onclick = function () {

                            console.log('点击');
                            // notification.close();
                        };
                    } else {
                        Notification.requestPermission();
                        console.log('没有权限,用户拒绝:Notification');
                    }
                });
            } else {
                // Safari
                Notification.requestPermission(function (permission) {
                    if (permission == "granted") {
                        var notification = new Notification('桌面推送', {
                            body: '这是我的第一条桌面推送',
                            icon: 'some/icon/url'
                        });
                     
                        notification.onclick = function () {

                            console.log('点击');
                            notification.close();
                        };
                    } else {
                        Notification.requestPermission();
                        console.log('没有权限,用户拒绝:Notification');
                    }
                })
            }
        }
    } else {
        console.log('不支持Notification');
    }
    </script>
</body>

</html>